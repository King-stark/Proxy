# 本文档为多方参考后用在Clash.NET中
mixin:
  dns:
    enable: true
    # 监听本地的53端口
    listen: 127.0.0.1:53
    # 使用 fake-ip 模式 或者 #redir-host
    enhanced-mode: fake-ip
    use-hosts: true
    # nameserver 裡 DoH / DoT 的域名使用 default-nameserver 請求
    default-nameserver:
      #- 114.114.114.114 #公共DNS
      - 119.29.29.29 #腾讯DNS
      - 223.5.5.5 #阿里云DNS
      #- 223.6.6.6 #阿里云DNS
      - 208.67.222.222 #OpenDNS
      #- 1.0.0.1 #Cloudflare DNS
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter: #这里的域名永远使用真实ip
      - "dns.msftncsi.com"
      - "www.msftncsi.com"
      - "www.msftconnecttest.com"
    
    # 國內域名使用 nameserver 請求 #Recommend 3 or less. You can add some yourself
    nameserver:
      #- 180.76.76.76
      - tls://223.5.5.5:853
      - https://doh.pub/dns-query #腾讯DNS
      - https://dns.alidns.com/dns-query #阿里DNS
      #- https://doh.360.cn/dns-query #NOT RECOMMEND!!!
    
    # 國外域名使用 fallback 請求 (没有被污染的DNS)#Recommend 3 or less. You can add some yourself
    fallback:
      - https://cloudflare-dns.com/dns-query #Cloudflare DNS
      - https://freedns.controld.com/p0 #Control DNS
      - https://doh.dns.sb/dns-query #DNS.SB
      #- https://dns-unfiltered.adguard.com/dns-query #AdguardDNS
      #- https://doh.opendns.com/dns-query #OpenDNS
      #- https://private.canadianshield.cira.ca/dns-query #CIRADNS
      #- https://dns.nextdns.io #NextDNS, you can sign up to get your own
      #- https://dns.quad9.net:5053/dns-query #Qua9DNS
      #- https://dns.twnic.tw/dns-query #台灣網路資訊中心 DNS
    
    # fallback请求过滤
    fallback-filter:
      #Recommend using GeoIP2-CN
      geoip: true
      ip-cidr: #You can add some yourself
        - 240.0.0.0/4
        - 127.0.0.1/8
        - 0.0.0.0/32
      domain:  #You can add some yourself
        - +.google.com
        - +.facebook.com
        - +.youtube.com
        - +.xn--ngstr-lra8j.com
        - +.google.cn
        - +.googleapis.cn
        - "+.github.com"

  tun:
    enable: true
    stack: gvisor # or system
    dns-hijack:
     - 198.18.0.2:53 # when `fake-ip-range` is 198.18.0.1/16, should hijack 198.18.0.2:53
     # - 8.8.8.8:53
     # - tcp://8.8.8.8:53
    auto-route: true # auto set global route for Windows
    # It is recommended to use `interface-name`
    auto-detect-interface: true # auto detect interface, conflict with `interface-name`
